{% extends "_master_center_content.html" %}
{% from "dashboard/macros/python_http_handler.html" import python_http_handler %}

{% block center_content %}
    <!-- Begin Page Content -->
    <form id="searchForm" method="get" action="{{ url_for("bp_dashboard.home") }}">
        <div class="container-fluid">

            <div class="row card shadow-white mb-2">
                <div class="card-body p-08">

                    <div class="row">
                        <div class="col-12 col-sm-3">
                            {{ form.log_level(class="form-control form-select") }}
                        </div>
                        <div class="col-12 col-sm-3">
                            {{ form.logger_name(class="form-control") }}
                        </div>
                        <div class="col-12 col-sm-6">
                            {{ form.search_text(class="form-control") }}
                        </div>
                    </div>

                    {% with messages = get_flashed_messages() %}
                        {% if messages %}
                            {% for message in messages %}
                                <span class="alert alert-danger">{{ message }}</span>
                            {% endfor %}
                        {% endif %}
                    {% endwith %}
                </div>
            </div>

            <!-- Content Row -->
            <div class="row mb-1 card shadow-white mb-2" style="background: #a8e9c2;">
                <div class="col-sm-12 m-2">
                    {#                    <div class="float-right"><a class="btn btn-sm btn-success btn-">asdf</a></div>#}
                    <div class="row bb-1">
                        <div class="col-lg-1 col-3 text-xsm text-center font-weight-bold text-uppercase border-right-log color-white">Log <p class="d-none d-sm-inline">Level</p></div>
                        <div class="col-lg-2 col-3 text-xsm text-center font-weight-bold border-right-log color-white">LOGGER <span class="d-none d-sm-inline">NAME</span></div>
                        <div class="col-lg-2 col-3 text-xsm text-center font-weight-bold border-right-log color-white"><a class="color-white" href="{{ change_url_order(url_for(request.endpoint, **request.args)) }}">CREATED <i class="fas fa-caret-{% if form.date_order.data == "desc" %}down{% else %}up{% endif %}"></i></a></div>
                        <div class="col-lg-7 col-3 text-xsm font-weight-bold color-white"><span class="d-none d-sm-inline">LOG </span>MESSAGE</div>
                    </div>
                </div>
            </div>
            {% if logs | length == 0 %}
                <div class="row mb-1 card shadow">
                    <div class="col-sm-12 m-2">
                        <div class="row bb-1">
                            <div class="col-lg-12 col-12 text-xsm text-center border-right-log">No logs to display</div>
                        </div>
                    </div>
                </div>
            {% endif %}
            {% for log in logs %}
                <div class="row mb-1 card shadow">
                    <div class="col-sm-12 m-2">
                        <div class="row bb-1">
                            {% if log_source == "python-http-handler" %}
                                {{ python_http_handler(log) }}
                            {% endif %}
                        </div>
                    </div>
                </div>
            {% endfor %}

            {% if logs | length != 0 %}
                <div class="row mt-2">
                    <div class="col-sm-12 col-md-12">
                        <div class="dataTables_info ml-4 mt-2 text-center" id="dataTable_info" role="status" aria-live="polite">Showing 1 to
                            {{ logs_per_page }} of {{ logs_total_pages }} pages.
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-sm-12 col-md-12">
                        <div class="d-flex">
                            <div class="mx-auto justify-content-center">
                                {{ pagination.links }}
                            </div>
                        </div>
                    </div>
                </div>
            {% endif %}


        </div>
    </form>
    <!-- /.container-fluid -->
{% endblock %}
